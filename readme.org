#+title: DERP: Deep recursive parameter estimation
#+author: Alexander E. Zarebski

This repository contains the code to simulate a database of
phylogenetic trees that will be used in a machine learning project in
which a neural network will be trained to solve phylodynamics
problems.

* Roadmap

- [-] Provide a single database file and some helper functions to read
  trees out and their associated metadata.
  + [ ] Establish the prior distribution to draw simulation parameters
    from, these will need to be sufficiently large to cover the range
    of plausible values for the use cases.
  + [ ] Put the whole computational pipeline into snakemake so it is
    easy to maintain in the future. During development we can use some
    small examples and just run them with shell scripts.
    * [ ] Include a helper script to lint the codebase.
  + [ ] Estimate an appropriate size of the database, we can use
    10,000 as a working number of samples.
  + [ ] There should be some visualisation functionality to help inspect the resulting data set.
    * [ ] Histograms of the simulation parameters used
    * [ ] Histograms of the properties of the trees resulting
    * [ ] Correlations between the properties
    * [ ] Visulisations of the individual trees simulated
  + [-] Store the trees and metadata in a single database file.
    * [X] Write a function that simulates the simulation parameters:
      - number of rate changes
      - duration of epidemic
      - birth, death and sampling rates
    * [ ] Write a function that takes the metadata and simulates an
      epidemic with remaster.
      - [ ] the remaster template file to run the simulation
      - [ ] the code to load the simulation parameters into the
        template
    * [ ] Write a function that processes the epidemic simulation to
      extract the desired features: prevalence, reproduction number,
      and cumulative infections.
    * [ ] Write a function that loads all the data from one simulation
      into the database.
  + [ ] Write some helper functions to read data out of the database
    in an efficient way.
  + [ ] Document how to use the database file and heler functions.
