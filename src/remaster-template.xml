<beast version='2.0' namespace='beast.base.inference.parameter:beast.base.inference:remaster'>
  <run spec="Simulator" nSims="1">

    <simulate id="tree" spec="SimulatedTree">
      <!-- NOTE the endsWhen limit of 20,000 means that if the
	   number of infected reaches this then the simulation ends.
	   This way we can stop any of the simulations going getting
	   too out of hand. -->
      <!-- endsWhen="X=100000" -->
      <trajectory id="trajectory"
                  spec="StochasticTrajectory"
                  maxTime="50"
                  mustHave="Psi>1 &amp;&amp; X>0 &amp;&amp; 50000>X">

        <population id="X" spec="RealParameter" value="1" />
        <samplePopulation id="Psi" spec="RealParameter" value="0" />
        <population id="Mu" spec="RealParameter" value="0" />

        <reaction id="lambdaReaction" spec="Reaction" rate="0.2" >X -> 2X</reaction>
        <reaction id="psiReaction" spec="Reaction" rate="0.008">X -> Psi</reaction>
        <reaction id="muReaction" spec="Reaction" rate="0.046">X -> Mu</reaction>

      </trajectory>
    </simulate>

    <logger fileName="out/demo.tree" mode="tree">
      <log spec="TypedTreeLogger" tree="@tree" />
    </logger>

    <logger fileName="out/demo.log">
      <log idref="trajectory" />
    </logger>
  </run>
</beast>
